@model Movie
@{
    ViewData["Title"] = "Edit an Entry";
}


<h1>@ViewData["Title"]</h1>

<form method="post">
    <input asp-for="movieID" value="@ViewBag.nowEditing.movieID" type="hidden" />
    <label asp-for="title">Title:</label>
    <input asp-for="title" required value="@ViewBag.nowEditing.title"/>
    <br />
    <label asp-for="year">Year:</label>
    <input asp-for="year" min="1888" required value="@ViewBag.nowEditing.year" />
    <br />
    <label asp-for="director">Director:</label>
    <input asp-for="director" value="@ViewBag.nowEditing.director" />
    <br />
    <label asp-for="categoryID">Category:</label>
    <select asp-for="categoryID">
        @*Iterate through the records from the "Catgories" table and use the "categoryName"s to populate the dropdown.*@
        <option value="">Select...</option>
        @foreach (Category c in ViewBag.categories)
        {
            if (ViewBag.nowEditing.categoryID == c.categoryID)
            {
                <option value="@c.categoryID" selected>@c.categoryName</option>
            }
            else
            {
                <option value="@c.categoryID">@c.categoryName</option>
            }
        }
    </select>
    <br />
    <label asp-for="rating">Rating:</label>
    <select id="rating" asp-for="rating">
        <option value="" selected>Select...</option>
        <option value="G">G</option>
        <option value="PG">PG</option>
        <option value="PG-13">PG-13</option>
        <option value="R">R</option>
        <option value="NR">NR</option>
        <option value="UR">UR</option>
        <option value="TV-14">TV-14</option>
        <option value="TV-PG">TV-PG</option>
        <option value="TV-Y7">TV-Y7</option>
    </select>
    <br />
    <label asp-for="edited">Edited:</label>
    <input id="edited" type="checkbox" asp-for="edited" />
    <br />
    <label asp-for="copiedToPlex">Copied To Plex:</label>
    <input id="copied" type="checkbox" asp-for="copiedToPlex" />
    <br />
    <label asp-for="lentTo">Lent To:</label>
    <input asp-for="lentTo" value="@ViewBag.nowEditing.lentTo" />
    <br />
    <label asp-for="notes">Notes:</label>
    <input asp-for="notes" maxlength="25" value="@ViewBag.nowEditing.notes" />
    <br />

    <button>Submit</button>
</form>


<script>
    // Select the rating that from the dropdown that the record already had.
    document.getElementById("rating").value = "@(ViewBag.nowEditing.rating)";

    // Check the "Edited" checkbox if the "edited" field is true in the record. 
    if ("@ViewBag.nowEditing.edited" == "True")
    {
        document.getElementById("edited").checked = true;
    }

    // Do the same for "copiedToPlex".
    if ("@ViewBag.nowEditing.copiedToPlex" == "True")
    {
        document.getElementById("copied").checked = true;
    }
</script>

